
--subindo stack do kafka
docker-compose up -d --build

--subindo postgresql sinc
docker run -d --name postgres-quarkus-hibernate -e POSTGRES_USER=hibernate \
           -e POSTGRES_PASSWORD=hibernate -e POSTGRES_DB=hibernate_db \
           -p 15432:5432 postgres:14.1
           
--criando connector source
curl -X POST -H "Content-Type: application/json" --data @./shipments.json http://localhost:8083/connectors

--removendo o connector
curl -X DELETE http://localhost:8083/connectors/shipments-connector

curl -X DELETE http://localhost:8083/connectors/mongodb-sink-shipments

--delete topic
docker run \
   --net=kafka-cdc_default \
   --rm \
   confluentinc/cp-enterprise-kafka:5.5.3 \
   kafka-topics --delete --bootstrap-server kafka:9092 --topic postgres.public.shipments
   
--listando o topico criado
docker run \
   --net=kafka-cdc_default \
   --rm \
   confluentinc/cp-enterprise-kafka:5.5.3 \
   kafka-topics --describe --bootstrap-server kafka:9092 --topic postgres.public.shipments
   
--consumindo os eventos do topico
docker run --tty \
--network kafka-cdc_default \
confluentinc/cp-kafkacat \
kafkacat -b kafka:9092 -C \
-s key=s -s value=avro \
-r http://schema-registry:8081 \
-t postgres.public.shipments

--criando connector sink postgresql
curl -X POST -H "Content-Type: application/json" --data @./postgres-sink.json http://localhost:8083/connectors

--subindo mongoDB
docker run -p 27117:27017 -d --name mongodb \
      -e MONGO_INITDB_ROOT_USERNAME=admin \
      -e MONGO_INITDB_ROOT_PASSWORD=admin \
      mongo
      
`#1 docker exec -it mongodb /bin/bash`    

`#2 mongosh`    

`#3 use admin`

`#4 db.auth("admin", passwordPrompt())`

--criando connector sink para o mongoDB
curl -X PUT http://localhost:8083/connectors/mongodb-sink-shipments/config -H "Content-Type: application/json" --data @./mongo-sink.json

****** Connector CSV *******

--criando connector source para o csv
curl -X PUT http://localhost:8083/connectors/connector-github-csv/config -H "Content-Type: application/json" --data @/home/everton/santander/csv-connector.json

--consumindo topico csv
./kafka-avro-console-consumer --bootstrap-server localhost:9092 --topic github-csv-topic --from-beginning

--removendo connector source
curl -X DELETE http://localhost:8083/connectors/connector-github-csv

